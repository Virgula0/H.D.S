<!-- Modal for Crack options -->
<div class="modal fade" id="crackModal" tabindex="-1" role="dialog" aria-labelledby="crackModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="crackModalLabel">Crack Options</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="crackForm" action="/submit-task" method="POST">
                <div class="modal-body">
                    <input type="hidden" id="crackUUID" name="uuid">

                    <!-- Attack Mode -->
                    <div class="form-group">
                        <label for="attackMode">Attack Mode</label>
                        <select class="form-control" id="attackMode" name="attackMode">
                            <!-- Options will be dynamically inserted here -->
                        </select>
                    </div>

                    <!-- Hash Mode -->
                    <div class="form-group">
                        <label for="hashMode">Hash Mode</label>
                        <select class="form-control" id="hashMode" name="hashMode">
                            <!-- Options will be dynamically inserted here -->
                        </select>
                    </div>

                    <!-- Wordlist -->
                    <div class="form-group">
                        <label for="wordlist">Wordlist</label>
                        <select class="form-control" id="wordlist" name="wordlist">
                            <option value="">-- select a wordlist --</option>
                            <option value="wordlists/rockyou.txt">rockyou.txt</option>
                        </select>
                    </div>

                    <!-- Other Options -->
                    <div class="form-group">
                        <label for="otherOptions">Other Options (will be appended to mandatory)</label>
                        <textarea class="form-control" id="otherOptions" name="otherOptions" rows="3"></textarea>
                    </div>

                    <!-- Assigned Client -->
                    <div class="form-group">
                        <label for="clientUUID">Assign Client</label>
                        <select class="form-control" id="clientUUID" name="clientUUID">
                            <!-- We'll populate this from the var clientUUIDs in dashboard.js -->
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="submitCrack">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal for Hashcat Options -->
<div class="modal fade" id="hashcatOptionsModal" tabindex="-1" role="dialog"
     aria-labelledby="hashcatOptionsModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="hashcatOptionsModalLabel">Hashcat Options</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="hashcatOptionsContent">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>
</div>

<!-- Modal for Hashcat Logs -->
<div class="modal fade" id="hashcatLogsModal" tabindex="-1" role="dialog"
     aria-labelledby="hashcatLogsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="hashcatLogsModalLabel">Hashcat Logs</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body hashcat-logs-content" id="hashcatLogsContent">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteConfirmModalHandshake" tabindex="-1" role="dialog"
     aria-labelledby="deleteConfirmModalLabelHandshake" aria-hidden="true">
    <form action="/delete-handshake" method="POST">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteConfirmModalLabelHandshake">Confirm Deletion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this handshake?
                    <input type="hidden" id="deleteUUIDHandshake" name="uuid">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </form>
</div>

<div class="modal fade" id="addHashModal" tabindex="-1" role="dialog" aria-labelledby="addHashModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addHashModalLabel">Add Hash Entry</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/create-handshake" method="POST" enctype="multipart/form-data">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="hashFile">Upload Hash File</label>
                        <input type="file" class="form-control-file" id="hashFile" name="file" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Upload</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="settingsModalLabel">Settings</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <button id="changePasswordBtn" class="btn btn-primary">Change Password</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changePasswordModalLabel">Change Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="changePasswordForm" action="/update-password" method="POST">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="old_password">Old Password</label>
                        <input type="password" class="form-control" id="old_password" name="old_password" required>
                    </div>
                    <div class="form-group">
                        <label for="new_password">New Password</label>
                        <input type="password" class="form-control" id="new_password" name="new_password" required>
                    </div>
                    <div class="form-group">
                        <label for="confirm_password">Confirm New Password</label>
                        <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Change Password</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteConfirmModalClient" tabindex="-1" role="dialog"
     aria-labelledby="deleteConfirmModalClientLabel" aria-hidden="true">
    <form action="/delete-client" method="POST">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteConfirmModalClientLabel">Confirm Deletion</h5>
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this client?
                    <input type="hidden" id="deleteUUIDClient" name="uuid">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteConfirmModalRsp" tabindex="-1" role="dialog"
     aria-labelledby="deleteConfirmModalLabelRsp" aria-hidden="true">
    <form action="/delete-raspberrypi" method="POST">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteConfirmModalLabelRsp">Confirm Deletion</h5>
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this RaspberryPi?
                    <input type="hidden" id="deleteUUIDRsp" name="uuid">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- Modal for encryption details -->
<div class="modal fade" id="encryptionDetailsModal" tabindex="-1" role="dialog" aria-labelledby="encryptionDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="encryptionDetailsModalLabel">Encryption Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="caCert">CA Certificate</label>
                    <textarea class="form-control" id="caCert" rows="5" readonly></textarea>
                    <button class="btn btn-warning btn-sm mt-2 copy-btn" data-target="caCert">Copy</button>
                </div>
                <div class="form-group">
                    <label for="clientCert">Client Certificate</label>
                    <textarea class="form-control" id="clientCert" rows="5" readonly></textarea>
                    <button class="btn btn-warning btn-sm mt-2 copy-btn" data-target="clientCert">Copy</button>
                </div>
                <div class="form-group">
                    <label for="clientKey">Client Key</label>
                    <textarea class="form-control" id="clientKey" rows="5" readonly></textarea>
                    <button class="btn btn-warning btn-sm mt-2 copy-btn" data-target="clientKey">Copy</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="loadingOverlay" class="loading-overlay">
    <!-- Use Bootstrap's spinner -->
    <div class="spinner-border text-light" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>

<!-- Scripts -->
<script src="/scripts/jquery-3.3.1.min.js"></script>
<script src="/scripts/popper.min.js"></script>
<script src="/scripts/bootstrap.min.js"></script>
<script src="/scripts/dashboard.js"></script>
